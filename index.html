<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>두더지잡기</title>
  <style>
    body {
  font-family: Pretendard, sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  background-image: url('ground.jpg');
  background-position: center -25px; /* 위로 20px 이동 */
             /* 화면에 맞게 확대/축소 */
  margin: 0;
}

    h1 {
      margin-bottom: 5px;
      color: #000000;
      font-size: 50px;
      font-weight: 900;
    }

    #game {
      display: grid;
      grid-template-columns: repeat(5, 150px);
      grid-gap: 35px;
      margin-top: 30px;
      justify-content: center;
    }

    .card {
      width: 150px;
      height: 100px;
      cursor: pointer;
      border-radius: 8px;
      overflow: hidden;
    }
    .card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    #controls {
      margin-top: 20px;
      text-align: center;
    }

    #startBtn {
      padding: 12px 24px;
      font-size: 16px;
      background-color: #4A6312;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }
    #startBtn:hover {
      background-color: #45a049;
      transform: scale(1.05);
    }

    #score, #timer {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>두더지잡기</h1>
  <div id="controls">
    <button id="startBtn">게임 시작</button>
    <div id="timer">남은 시간: 0초</div>
    <div id="score">점수: 0</div>
  </div>
  <div id="game"></div>

  <script>
    const gameContainer = document.getElementById("game");
    const startBtn = document.getElementById("startBtn");
    const timerEl = document.getElementById("timer");
    const scoreEl = document.getElementById("score");

    const TOTAL_CARDS = 20;
    let images = [];
    let score = 0;
    let timeLeft = 10;
    let gameInterval, changeInterval;
    let oddIndex = -1;

    // 🎵 정답 클릭 시 재생될 사운드, 1초 지점부터 재생
    const punchSound = new Audio("punch.mp3");
    punchSound.preload = "auto"; // 미리 로드

    // 초기 카드 생성
    function createCards() {
      gameContainer.innerHTML = "";
      images = [];
      for (let i = 0; i < TOTAL_CARDS; i++) {
        const div = document.createElement("div");
        div.classList.add("card");
        const img = document.createElement("img");
        img.src = "beach.png";
        div.appendChild(img);
        div.addEventListener("click", () => handleClick(i));
        gameContainer.appendChild(div);
        images.push(img);
      }
    }

    function startGame() {
      score = 0;
      timeLeft = 10;
      scoreEl.textContent = `점수: ${score}`;
      timerEl.textContent = `남은 시간: ${timeLeft}초`;
      createCards();

      changeImage();
      changeInterval = setInterval(changeImage, 1000);

      gameInterval = setInterval(() => {
        timeLeft--;
        timerEl.textContent = `남은 시간: ${timeLeft}초`;
        if (timeLeft <= 0) {
          clearInterval(gameInterval);
          clearInterval(changeInterval);
          alert(`게임 종료! 당신의 점수는 ${score}점입니다.`);
        }
      }, 1000);
    }

    function changeImage() {
      oddIndex = Math.floor(Math.random() * TOTAL_CARDS);
      for (let i = 0; i < TOTAL_CARDS; i++) {
        images[i].src = (i === oddIndex) ? "beach.png" : "forest.png";
      }
    }

    function handleClick(index) {
      if (index === oddIndex) {
        score++;
        scoreEl.textContent = `점수: ${score}`;

        // 1초 지점부터 재생
        punchSound.currentTime = 1;
        punchSound.play();

        changeImage();
      }
    }

    startBtn.addEventListener("click", startGame);

    createCards();
  </script>
</body>
</html>
